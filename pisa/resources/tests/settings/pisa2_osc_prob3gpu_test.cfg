[pipeline]

# define order of stages to be excecuted one after another, and specify the
# service to use for each of them as stage1:serviceA, stage2:serviceB, ...
order = osc:prob3gpu

# selects the params denoted by param.<param_selector>.<paramname>
param_selections = nh

#------------------------------------------------------------------------------
# Binning definitions, linked back to from stage definitions
#------------------------------------------------------------------------------

[binning]

osc_test_binning.order = true_energy, true_coszen
osc_test_binning.true_energy = {'num_bins':40, 'is_log':True, 'domain':[1,80] * units.GeV, 'tex': r'$E_{\rm true}$'}
osc_test_binning.true_coszen = {'num_bins':20, 'is_lin':True, 'domain':[-1,0], 'tex':r'$\cos\,\theta_{Z,{\rm true}}$'}

#------------------------------------------------------------------------------
# Oscillations
#------------------------------------------------------------------------------

[stage:osc]

# instantiation arguments

input_binning = osc_test_binning
output_binning = osc_test_binning

error_method = None
debug_mode = False
transforms_cache_depth = 0
outputs_cache_depth = 0
memcache_deepcopy = False

# params

param.earth_model = osc/PREM_12layer.dat

param.YeI = 0.4656
param.YeM = 0.4957
param.YeO = 0.4656

param.detector_depth = 2. units.km
param.prop_height = 20. units.km

param.theta12 = <!pisav2unitmatch|theta12!>
param.theta12.fixed = True

param.theta13 = <!pisav2unitmatch|theta13!>
param.theta13.fixed = False
param.theta13.range = nominal + [-3.25, +3] * sigma

param.nh.theta23 = <!pisav2unitmatch|theta23_nh!>
param.nh.theta23.fixed = False
param.nh.theta23.range = nominal + [-4.1, +11] * units.deg

param.ih.theta23 = <!pisav2unitmatch|theta23_ih!>
param.ih.theta23.fixed = False
param.ih.theta23.range = nominal + [-10.9, +3.8] * units.deg

param.deltacp = <!pisav2unitmatch|deltacp!>
param.deltacp.fixed = True

param.deltam21 = <!pisav2unitmatch|deltam21!>
param.deltam21.fixed = True

param.nh.deltam31 = <!pisav2unitmatch|deltam31_nh!>
param.nh.deltam31.fixed = False

param.ih.deltam31 = <!pisav2unitmatch|deltam31_ih!>
param.ih.deltam31.fixed = False

param.nutau_norm = 1

#------------------------------------------------------------------------------
# Define names for common things to use in the above
#------------------------------------------------------------------------------

[pisav2unitmatch]
# Atmospheric mixing parameters used for PINGU LoI v2.0
theta12 = 0.584 units.rad
theta12.fixed = True

theta13 = 0.148 +/- 0.003490658503988659 units.rad
theta13.fixed = False

theta23_nh = 0.7382742735936013 units.rad
theta23_nh.fixed = False
theta23_nh.prior = uniform

theta23_ih = 0.8639379797371931 units.rad
theta23_ih.fixed = False
theta23_ih.prior = uniform

deltacp = 0 units.rad
deltacp.fixed = True

deltam21 = 7.5e-5 units.eV**2
deltam21.fixed = True

deltam31_nh = 2.457e-3 units.eV**2
deltam31_nh.fixed = False
deltam31_nh.prior = uniform

deltam31_ih = -2.37e-3 units.eV**2
deltam31_ih.fixed = False
deltam31_ih.prior = uniform

# Atmospheric mixing parameters used for PINGU LoI v2.0
[loi2]
theta12 = 33.5 units.deg
theta12.fixed = True

theta13 = 8.5 +/- 0.2 units.deg
theta13.fixed = False

theta23_nh = 42.3 units.deg
theta23_nh.fixed = False
theta23_nh.prior = uniform

theta23_ih = 49.5 units.deg
theta23_ih.fixed = False
theta23_ih.prior = uniform

deltacp = 0 units.deg
deltacp.fixed = True

deltam21 = 7.5e-5 units.eV**2
deltam21.fixed = True

deltam31_nh = 2.46e-3 units.eV**2
deltam31_nh.fixed = False
deltam31_nh.prior = uniform

deltam31_ih = -2.37e-3 units.eV**2
deltam31_ih.fixed = False
deltam31_ih.prior = uniform

[nufit2]
# Atmospheric mixing parameters found in NuFIT 2.0
theta12 = 33.48 units.deg
theta12.prior = spline
theta12.prior.data = priors/nufit2.json

theta13_nh = 8.5 units.deg
theta13_nh.prior = spline
theta13_nh.prior.data = priors/nufit2.json

theta13_ih = 8.51 units.deg
theta13_ih.prior = spline
theta13_ih.prior.data = priors/nufit2.json

theta23_nh = 42.3 units.deg
theta23_nh.prior = spline
theta23_nh.prior.data = priors/nufit2.json

theta23_ih = 49.5 units.deg
theta23_ih.prior = spline
theta23_ih.prior.data = priors/nufit2.json

deltacp_nh = 306 units.deg
deltacp_nh.prior = spline
deltacp_nh.prior.data = priors/nufit2.json

deltacp_ih = 254 units.deg
deltacp_ih.prior = spline
deltacp_ih.prior.data = priors/nufit2.json

deltam21 = 7.5e-5 units.eV**2
deltam21.prior = spline
deltam21.prior.data = priors/nufit2.json

deltam31_nh = 0.002457 units.eV**2
deltam31_nh.prior = spline
deltam31_nh.prior.data = priors/nufit2.json

deltam31_ih = -0.002449 units.eV**2
deltam31_ih.prior = spline
deltam31_ih.prior.data = priors/nufit2.json
